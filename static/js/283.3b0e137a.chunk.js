"use strict";(self.webpackChunklasting_website=self.webpackChunklasting_website||[]).push([[283],{8283:function(e,n,r){r.r(n),r.d(n,{default:function(){return u}});var t=r(3430),c=r(2791),i=r(184);function u(){var e=(0,c.useState)(!1),n=(0,t.Z)(e,2),r=n[0],u=n[1],a=(0,c.useRef)(null),s=(0,c.useRef)(null),l=(0,c.useRef)(null),o=(0,c.useRef)([]);return(0,c.useEffect)((function(){try{void 0===navigator.mediaDevices.getUserMedia&&null===navigator.mediaDevices.getUserMedia||navigator.mediaDevices.getUserMedia({audio:!1,video:{width:400,height:400}}).then((function(e){null!==a.current&&(a.current.srcObject=e,o.current=e.getTracks(),a.current.play().then((function(e){}),(function(e){})))})).catch((function(e){alert("\u65e0\u6cd5\u8c03\u7528\u6444\u50cf\u5934")}))}catch(e){throw alert("\u8bf7\u67e5\u770b\u63a7\u5236\u53f0"),new Error("\u5730\u5740\u680f\u641c\u7d22chrome://flags/\uff0c\u627e\u5230Insecure origins treated as secure,\u628a\u672c\u7ad9\u57df\u540dhttp://www.lastingcoder.xyz\u8f93\u5165")}return function(){o.current.forEach((function(e){e.stop()}))}}),[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"useUserMedia",children:[(0,i.jsxs)("div",{className:"media-window",children:[(0,i.jsx)("video",{className:r?"mirror":"",width:400,height:400,ref:a}),(0,i.jsx)("button",{onClick:function(){u(!r)},children:r?"\u955c\u50cf":"\u6b63\u5e38"}),(0,i.jsx)("button",{onClick:function(){var e;null!==s.current&&null!==a.current&&(null===(e=s.current.getContext("2d"))||void 0===e||e.drawImage(a.current,0,0),s.current.toBlob((function(e){if(null!==e&&null!==l.current){var n=URL.createObjectURL(e);l.current.download="target.png",l.current.href=n,l.current.click(),URL.revokeObjectURL(n)}}),void 0,1))},children:"\u622a\u56fe"})]}),(0,i.jsx)("canvas",{className:"useUserMidia-canvas",width:400,height:400,ref:s}),(0,i.jsx)("a",{hidden:!0,ref:l,children:"download"})]})})}}}]);
//# sourceMappingURL=283.3b0e137a.chunk.js.map